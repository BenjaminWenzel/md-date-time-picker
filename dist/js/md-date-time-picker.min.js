"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),_dialog={view:!0,state:!1},mdDateTimePicker=function(){function t(e){var i=arguments.length<=1||void 0===arguments[1]?"":arguments[1],s=arguments.length<=2||void 0===arguments[2]?"":arguments[2],a=arguments.length<=3||void 0===arguments[3]?"":arguments[3];_classCallCheck(this,t),this._type=e,this._init=i,this._past=s,this._future=a,this._sDialog={},this._sDialog.date=moment(),this._init&&(this._sDialog.date=moment(this._init,this._format))}return _createClass(t,[{key:"date",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return""===t?this._sDialog.date:void(this._sDialog.date=t.clone())}},{key:"toggle",value:function(){this._selectDialog(),t.dialog.state?this._hideDialog():("date"===this._type?this._initDateDialog(this._sDialog.date):"time"===this._type,this._showDialog())}},{key:"_selectDialog",value:function(){var t=document.getElementById("md-picker__"+[this._type]),e=t.cloneNode(!0);t.parentNode.replaceChild(e,t),this._sDialog.picker=document.getElementById("md-picker__"+[this._type]);var i=["viewHolder","years","header","cancel","ok","left","right","previous","current","next","subtitle","title"],s=!0,a=!1,o=void 0;try{for(var n,l=i[Symbol.iterator]();!(s=(n=l.next()).done);s=!0){var r=n.value;this._sDialog[r]=document.getElementById("md-"+this._type+"__"+r)}}catch(c){a=!0,o=c}finally{try{!s&&l["return"]&&l["return"]()}finally{if(a)throw o}}this._sDialog.tDate=this._sDialog.date.clone()}},{key:"_showDialog",value:function(){t.dialog.state=!0,this._sDialog.picker.classList.remove("md-picker--inactive"),this._sDialog.picker.classList.add("zoomIn")}},{key:"_hideDialog",value:function(){var e=this,i=this._sDialog.years,s=this._sDialog.header,a=this._sDialog.viewHolder;t.dialog.state=!1,t.dialog.view=!0,this._sDialog.picker.classList.add("zoomOut"),i.classList.remove("zoomIn","zoomOut"),i.classList.add("md-picker__years--invisible"),s.classList.remove("md-picker__header--invert"),a.classList.remove("zoomOut"),setTimeout(function(){e._sDialog.picker.classList.remove("zoomOut","zoomIn"),e._sDialog.picker.classList.add("md-picker--inactive")},300)}},{key:"_initDateDialog",value:function(t){var e=this._sDialog.subtitle,i=this._sDialog.title;e.innerHTML=t.format("YYYY"),i.innerHTML=t.format("ddd,")+"<br />"+t.format("MMM D"),this._initYear(),this._initViewHolder(t),this._attachEventHandlers(),this._changeMonth(),this._switchToDateView(e),this._switchToDateView(i)}},{key:"_initViewHolder",value:function(t){var e=(this._sDialog.picker,this._sDialog.current),i=this._sDialog.previous,s=this._sDialog.next;this._initMonth(e,t),this._initMonth(s,moment(this._getMonth(t,1))),this._initMonth(i,moment(this._getMonth(t,-1))),this._switchToDateView(e.querySelector(".md-picker__month"))}},{key:"_initMonth",value:function(t,e){var i=e.format("MMMM YYYY");t.querySelector(".md-picker__month").innerHTML=i;var s=document.createDocumentFragment(),a=t.querySelector(".md-picker__tr"),o=parseInt(moment(e).date(1).day(),10),n=-1,l=-1,r=parseInt(moment(e).endOf("month").format("D"),10)+o-1;moment().isSame(e,"month")&&(n=parseInt(moment().format("D"),10),n+=o-1),i===this._sDialog.date.format("MMMM YYYY")&&(l=parseInt(moment(e).format("D"),10),l+=o-1);for(var c=0;42>c;c++){var d=document.createElement("span"),_=c-o+1;c>=o&&r>=c&&(d.classList.add("md-picker__cell"),d.innerHTML=_),n===c&&d.classList.add("md-picker__today"),l===c&&d.classList.add("md-picker__selected"),s.appendChild(d)}for(;a.lastChild;)a.removeChild(a.lastChild);a.appendChild(s),this._addCellClickEvent(a)}},{key:"_initYear",value:function(){for(var t=this._sDialog.years,e=this._sDialog.tDate.year(),i=document.createDocumentFragment(),s=1900;2100>=s;s++){var a=document.createElement("li");a.textContent=s,s===e&&(a.id="md-date__currentYear",a.classList.add("md-picker__li--current")),i.appendChild(a)}for(;t.lastChild;)t.removeChild(t.lastChild);t.appendChild(i),this._changeYear(t)}},{key:"_switchToDateView",value:function(t){var e=this;t.addEventListener("click",function(){e._switchToDateViewFunction(t,e)},!1)}},{key:"_switchToDateViewFunction",value:function(e,i){e.classList.add("md-button--unclickable");var s=i._sDialog.viewHolder,a=i._sDialog.years,o=i._sDialog.header,n=document.getElementById("md-date__currentYear");t.dialog.view?(s.classList.add("zoomOut"),a.classList.remove("md-picker__years--invisible"),a.classList.add("zoomIn"),n.scrollIntoViewIfNeeded()):(a.classList.add("zoomOut"),s.classList.remove("zoomOut"),s.classList.add("zoomIn"),setTimeout(function(){a.classList.remove("zoomIn","zoomOut"),a.classList.add("md-picker__years--invisible"),s.classList.remove("zoomIn")},300)),o.classList.toggle("md-picker__header--invert"),t.dialog.view=!t.dialog.view,setTimeout(function(){e.classList.remove("md-button--unclickable")},300)}},{key:"_addCellClickEvent",value:function(t){var e=this;t.addEventListener("click",function(t){if(t.target&&"SPAN"==t.target.nodeName&&t.target.classList.contains("md-picker__cell")){var i=e._sDialog.picker,s=t.target.innerHTML,a=e._sDialog.tDate.date(s),o=i.querySelector(".md-picker__selected"),n=e._sDialog.title,l=e._sDialog.subtitle;o&&o.classList.remove("md-picker__selected"),t.target.classList.add("md-picker__selected"),e._sDialog.tDate=a,l.innerHTML=a.year(),n.innerHTML=a.format("ddd,")+"<br />"+a.format("MMM D")}})}},{key:"_updateDialog",value:function(){this._initViewHolder(this._sDialog.tDate)}},{key:"_changeMonth",value:function(){function t(t,a){var o=!1,l=e._sDialog.next,r=e._sDialog.current,c=e._sDialog.previous;i.classList.add("md-button--unclickable"),s.classList.add("md-button--unclickable"),r.classList.add(t),c.classList.add(t),l.classList.add(t);var d=a.cloneNode(!0),_=void 0;a===l?(_=c,r.parentNode.appendChild(d),l.id=r.id,r.id=c.id,c=r,r=l,l=d):(o=!0,_=l,c.id=r.id,r.id=l.id,l=r,r=c),setTimeout(function(){a===c&&(r.parentNode.insertBefore(d,r),c=d),e._sDialog.next=l,e._sDialog.current=r,e._sDialog.previous=c,r.classList.add(n),l.classList.add(n),c.classList.add(n),r.classList.remove(t),l.classList.remove(t),c.classList.remove(t),_.parentNode.removeChild(_)},300),setTimeout(function(){r.classList.remove(n),l.classList.remove(n),c.classList.remove(n),o?e._sDialog.tDate=e._getMonth(e._sDialog.tDate,-1):e._sDialog.tDate=e._getMonth(e._sDialog.tDate,1),e._initViewHolder(e._sDialog.tDate)},350),setTimeout(function(){i.classList.remove("md-button--unclickable"),s.classList.remove("md-button--unclickable")},400)}var e=this,i=this._sDialog.left,s=this._sDialog.right,a="md-picker__view--left",o="md-picker__view--right",n="md-picker__view--pause";i.addEventListener("click",function(){t(o,e._sDialog.previous)}),s.addEventListener("click",function(){t(a,e._sDialog.next)})}},{key:"_changeYear",value:function(t){var e=this;t.addEventListener("click",function(i){if(i.target&&"LI"==i.target.nodeName){var s=document.getElementById("md-date__currentYear");s.id="",s.classList.remove("md-picker__li--current"),i.target.id="md-date__currentYear",i.target.classList.add("md-picker__li--current"),e._switchToDateViewFunction(t,e),e._sDialog.tDate.year(parseInt(i.target.innerHTML,10)),e._updateDialog()}},!1)}},{key:"_attachEventHandlers",value:function(){var t=this,e=this._sDialog.ok,i=this._sDialog.cancel;i.addEventListener("click",function(){t.toggle()}),e.addEventListener("click",function(){t._sDialog.date=t._sDialog.tDate,t.toggle()})}},{key:"_getMonth",value:function(t,e){var i=void 0;return i=t.clone(),e>0?i.add(Math.abs(e),"month"):i.subtract(Math.abs(e),"month")}}],[{key:"dialog",get:function(){return _dialog}}]),t}();Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(t){t=0===arguments.length?!0:!!t;var e=this.parentNode,i=window.getComputedStyle(e,null),s=parseInt(i.getPropertyValue("border-top-width"),10),a=parseInt(i.getPropertyValue("border-left-width"),10),o=this.offsetTop-e.offsetTop<e.scrollTop,n=this.offsetTop-e.offsetTop+this.clientHeight-s>e.scrollTop+e.clientHeight,l=this.offsetLeft-e.offsetLeft<e.scrollLeft,r=this.offsetLeft-e.offsetLeft+this.clientWidth-a>e.scrollLeft+e.clientWidth,c=o&&!n;(o||n)&&t&&(e.scrollTop=this.offsetTop-e.offsetTop-e.clientHeight/2-s+this.clientHeight/2),(l||r)&&t&&(e.scrollLeft=this.offsetLeft-e.offsetLeft-e.clientWidth/2-a+this.clientWidth/2),(o||n||l||r)&&!t&&this.scrollIntoView(c)});