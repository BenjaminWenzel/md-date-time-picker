"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),_dialog={date:{picker:".md-picker-date ",current:".md-picker__view--current ",previous:".md-picker__view--previous ",next:".md-picker__view--next ",view:!0},time:{},common:{state:!1,cancel:".md-button--cancel",ok:".md-button--ok"}},mdDateTimePicker=function(){function e(t){var i=arguments.length<=1||void 0===arguments[1]?"":arguments[1],s=arguments.length<=2||void 0===arguments[2]?"YYYY-MM-DD":arguments[2],o=arguments.length<=3||void 0===arguments[3]?"":arguments[3],r=arguments.length<=4||void 0===arguments[4]?"":arguments[4];_classCallCheck(this,e),this._type=t,this._init=i,this._format=s,this._display=o,this._args=r,this._type&&(this._sDialog={})}return _createClass(e,[{key:"toggle",value:function(){this._selectDialog(),e.dialog.state?this._hideDialog():("date"===this._type?this._initDateDialog(this._sDialog.date):"time"===this._type,this._showDialog())}},{key:"_selectDialog",value:function(){var e=document.getElementById("md-picker__"+[this._type]),t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),this._sDialog.picker=document.getElementById("md-picker__"+[this._type]);var i=["viewHolder","years","header","cancel","ok","left","right","previous","current","next"],s=!0,o=!1,r=void 0;try{for(var n,a=i[Symbol.iterator]();!(s=(n=a.next()).done);s=!0){var l=n.value;this._sDialog[l]=document.getElementById("md-"+[this._type]+"__"+l)}}catch(c){o=!0,r=c}finally{try{!s&&a["return"]&&a["return"]()}finally{if(o)throw r}}this._sDialog.date||(this._init?this._sDialog.date=moment(this._init,this._format):this._sDialog.date=moment()),this._sDialog.tDate=this._sDialog.date}},{key:"_showDialog",value:function(){e.dialog.state=!0,this._sDialog.picker.classList.remove("md-picker--inactive"),this._sDialog.picker.classList.add("zoomIn")}},{key:"_hideDialog",value:function(){var t=this,i=this._sDialog.years,s=this._sDialog.header,o=this._sDialog.viewHolder;e.dialog.state=!1,e.dialog[this._type].view=!0,this._sDialog.picker.classList.add("zoomOut"),i.classList.remove("zoomIn","zoomOut"),i.classList.add("md-picker__years--invisible"),s.classList.remove("md-picker__header--invert"),o.classList.remove("zoomOut"),setTimeout(function(){t._sDialog.picker.classList.remove("zoomOut","zoomIn"),t._sDialog.picker.classList.add("md-picker--inactive")},300)}},{key:"_initDateDialog",value:function(t){var i=e.dialog.date.picker;document.querySelector(i+".md-picker__subtitle").innerHTML=t.format("YYYY"),document.querySelector(i+".md-picker__title").innerHTML=t.format("ddd,")+"<br />"+t.format("MMM D"),this._initViewHolder(t),this._initYear(),this._attachEventHandlers(),this._changeMonth(),this._switchToDateView(i,document.querySelector(i+".md-picker__subtitle")),this._switchToDateView(i,document.querySelector(i+".md-picker__title"))}},{key:"_initViewHolder",value:function(t){var i=e.dialog.date.picker,s=e.dialog.date.current,o=e.dialog.date.previous,r=e.dialog.date.next;this._initMonth(i+s,t,this._sDialog.current),this._initMonth(i+r,moment(this._getNextMonth(t)),this._sDialog.next),this._initMonth(i+o,moment(this._getPreviousMonth(t)),this._sDialog.previous),this._switchToDateView(i,document.querySelector(i+s+".md-picker__month"))}},{key:"_initMonth",value:function(t,i,s){var o=i.format("MMMM YYYY");document.querySelector(t+".md-picker__month").innerHTML=o;var r=document.querySelector(t+".md-picker__today"),n=document.querySelector(t+".md-picker__selected"),a=document.querySelectorAll(t+".md-picker__tr span"),l=parseInt(moment(i).date(1).day(),10),c=-1,d=-1,u=parseInt(moment(i).endOf("month").format("D"),10)+l-1;r&&r.classList.remove("md-picker__today"),n&&n.classList.remove("md-picker__selected"),moment().format("MMMM YYYY")===o&&(c=parseInt(moment().format("D"),10),c+=l-1),t.indexOf(e.dialog.date.current.trim())>=0&&(d=parseInt(moment(i).format("D"),10),d+=l-1);for(var _=0;_<a.length;_++){var m=a[_],h=_-l+1;l>_&&(m.classList.remove("md-picker__cell"),m.innerHTML=""),c===_&&m.classList.add("md-picker__today"),d===_&&m.classList.add("md-picker__selected"),_>=l&&u>=_&&(m.classList.add("md-picker__cell"),m.innerHTML=h,this._addCellClickEvent(m,s)),_>u&&(m.classList.remove("md-picker__cell"),m.innerHTML="")}}},{key:"_initYear",value:function(){for(var e=this._sDialog.years,t=parseInt(this._sDialog.date.format("YYYY"),10),i="",s=1900;2100>=s;s++)i+=s===t?'<li id="md-date__currentYear" class="md-picker__li--current">'+s+"</li>":"<li>"+s+"</li>";e.innerHTML=i,this._sDialog.currentYear=document.getElementById("md-date__currentYear")}},{key:"_switchToDateView",value:function(t,i){var s=this;i.addEventListener("click",function(){i.classList.add("md-button--unclickable");var t=s._sDialog.viewHolder,o=s._sDialog.years,r=s._sDialog.header;e.dialog.date.view?(t.classList.add("zoomOut"),o.classList.remove("md-picker__years--invisible"),o.classList.add("zoomIn"),s._sDialog.currentYear.scrollIntoViewIfNeeded()):(o.classList.add("zoomOut"),t.classList.remove("zoomOut"),t.classList.add("zoomIn"),setTimeout(function(){o.classList.remove("zoomIn","zoomOut"),o.classList.add("md-picker__years--invisible"),t.classList.remove("zoomIn")},300)),r.classList.toggle("md-picker__header--invert"),e.dialog.date.view=!e.dialog.date.view,setTimeout(function(){i.classList.remove("md-button--unclickable")},300)})}},{key:"_addCellClickEvent",value:function(e,t){var i=this;e.addEventListener("click",function(){var s=".md-picker-date ",o=e.innerHTML,r=t.querySelector(".md-picker__month").innerHTML,n=moment(o+" "+r,"D MMMM YYYY"),a=document.querySelector(s+".md-picker__selected");a&&a.classList.remove("md-picker__selected"),e.classList.add("md-picker__selected"),i._sDialog.tDate=n,document.querySelector(s+".md-picker__subtitle").innerHTML=n.format("YYYY"),document.querySelector(s+".md-picker__title").innerHTML=n.format("ddd,")+"<br />"+n.format("MMM D")})}},{key:"_changeMonth",value:function(){function e(e,o,r){i.classList.add("md-button--unclickable"),s.classList.add("md-button--unclickable"),e.current.classList.add(o),e.previous.classList.add(o),e.next.classList.add(o);var a=r.cloneNode(!0),l=void 0;r===e.next?(l=e.previous,e.current.parentNode.appendChild(a),e.next.id=e.current.id,e.current.id=e.previous.id,e.previous=e.current,e.current=e.next,e.next=a):(l=e.next,e.previous.id=e.current.id,e.current.id=e.next.id,e.next=e.current,e.current=e.previous),setTimeout(function(){r===e.previous&&(e.current.parentNode.insertBefore(a,e.current),e.previous=a),e.current.classList.add(n),e.next.classList.add(n),e.previous.classList.add(n),e.current.classList.remove(o),e.next.classList.remove(o),e.previous.classList.remove(o),l.parentNode.removeChild(l)},300),setTimeout(function(){e.current.classList.remove(n),e.next.classList.remove(n),e.previous.classList.remove(n),r===e.next?t._initViewHolder(t._getNextMonth(t._sDialog.tDate)):t._initViewHolder(t._getPreviousMonth(t._sDialog.tDate))},350),setTimeout(function(){i.classList.remove("md-button--unclickable"),s.classList.remove("md-button--unclickable")},400)}var t=this,i=this._sDialog.left,s=this._sDialog.right,o="md-picker__view--left",r="md-picker__view--right",n="md-picker__view--pause",a={next:this._sDialog.next,current:this._sDialog.current,previous:this._sDialog.previous};i.addEventListener("click",function(){e(a,r,a.previous)}),s.addEventListener("click",function(){e(a,o,a.next)})}},{key:"_attachEventHandlers",value:function(){var e=this,t=this._sDialog.ok,i=this._sDialog.cancel;i.addEventListener("click",function(){e.toggle()}),t.addEventListener("click",function(){e._sDialog.date=e._sDialog.tDate,e.toggle()})}},{key:"_getPreviousMonth",value:function(e){var t=void 0;return t=e.clone(),t.subtract(1,"month")}},{key:"_getNextMonth",value:function(e){var t=void 0;return t=e.clone(),t.add(1,"month")}}],[{key:"dialog",get:function(){return _dialog}}]),e}();Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(e){e=0===arguments.length?!0:!!e;var t=this.parentNode,i=window.getComputedStyle(t,null),s=parseInt(i.getPropertyValue("border-top-width")),o=parseInt(i.getPropertyValue("border-left-width")),r=this.offsetTop-t.offsetTop<t.scrollTop,n=this.offsetTop-t.offsetTop+this.clientHeight-s>t.scrollTop+t.clientHeight,a=this.offsetLeft-t.offsetLeft<t.scrollLeft,l=this.offsetLeft-t.offsetLeft+this.clientWidth-o>t.scrollLeft+t.clientWidth,c=r&&!n;(r||n)&&e&&(t.scrollTop=this.offsetTop-t.offsetTop-t.clientHeight/2-s+this.clientHeight/2),(a||l)&&e&&(t.scrollLeft=this.offsetLeft-t.offsetLeft-t.clientWidth/2-o+this.clientWidth/2),(r||n||a||l)&&!e&&this.scrollIntoView(c)});