"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),_dialog={view:!0,state:!1},mdDateTimePicker=function(){function e(t){var i=arguments.length<=1||void 0===arguments[1]?"":arguments[1],s=arguments.length<=2||void 0===arguments[2]?"":arguments[2],a=arguments.length<=3||void 0===arguments[3]?"":arguments[3];_classCallCheck(this,e),this._type=t,this._init=i,this._display=s,this._args=a,this._type&&(this._sDialog={})}return _createClass(e,[{key:"upDate",value:function(e){this._sDialog.date=e.clone()}},{key:"toggle",value:function(){this._selectDialog(),e.dialog.state?this._hideDialog():("date"===this._type?this._initDateDialog(this._sDialog.date):"time"===this._type,this._showDialog())}},{key:"_selectDialog",value:function(){var e=document.getElementById("md-picker__"+[this._type]),t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),this._sDialog.picker=document.getElementById("md-picker__"+[this._type]);var i=["viewHolder","years","header","cancel","ok","left","right","previous","current","next","subtitle","title"],s=!0,a=!1,o=void 0;try{for(var l,n=i[Symbol.iterator]();!(s=(l=n.next()).done);s=!0){var r=l.value;this._sDialog[r]=document.getElementById("md-"+this._type+"__"+r)}}catch(c){a=!0,o=c}finally{try{!s&&n["return"]&&n["return"]()}finally{if(a)throw o}}this._sDialog.date||(this._init?this._sDialog.date=moment(this._init,this._format):this._sDialog.date=moment()),this._sDialog.tDate=this._sDialog.date.clone()}},{key:"_showDialog",value:function(){e.dialog.state=!0,this._sDialog.picker.classList.remove("md-picker--inactive"),this._sDialog.picker.classList.add("zoomIn")}},{key:"_hideDialog",value:function(){var t=this,i=this._sDialog.years,s=this._sDialog.header,a=this._sDialog.viewHolder;e.dialog.state=!1,e.dialog.view=!0,this._sDialog.picker.classList.add("zoomOut"),i.classList.remove("zoomIn","zoomOut"),i.classList.add("md-picker__years--invisible"),s.classList.remove("md-picker__header--invert"),a.classList.remove("zoomOut"),setTimeout(function(){t._sDialog.picker.classList.remove("zoomOut","zoomIn"),t._sDialog.picker.classList.add("md-picker--inactive")},300)}},{key:"_initDateDialog",value:function(e){var t=this._sDialog.subtitle,i=this._sDialog.title;t.innerHTML=e.format("YYYY"),i.innerHTML=e.format("ddd,")+"<br />"+e.format("MMM D"),this._initYear(),this._initViewHolder(e),this._attachEventHandlers(),this._changeMonth(),this._switchToDateView(t),this._switchToDateView(i)}},{key:"_initViewHolder",value:function(e){var t=(this._sDialog.picker,this._sDialog.current),i=this._sDialog.previous,s=this._sDialog.next;this._initMonth(t,e),this._initMonth(s,moment(this._getMonth(e,1))),this._initMonth(i,moment(this._getMonth(e,-1))),this._switchToDateView(t.querySelector(".md-picker__month"))}},{key:"_initMonth",value:function(e,t){var i=t.format("MMMM YYYY");e.querySelector(".md-picker__month").innerHTML=i;var s=e.querySelector(".md-picker__today"),a=e.querySelector(".md-picker__selected"),o=e.querySelectorAll(".md-picker__tr span"),l=parseInt(moment(t).date(1).day(),10),n=-1,r=-1,c=parseInt(moment(t).endOf("month").format("D"),10)+l-1;s&&s.classList.remove("md-picker__today"),a&&a.classList.remove("md-picker__selected"),moment().format("MMMM YYYY")===i&&(n=parseInt(moment().format("D"),10),n+=l-1),e===this._sDialog.current&&(r=parseInt(moment(t).format("D"),10),r+=l-1);for(var d=0;d<o.length;d++){var _=o[d],h=d-l+1;l>d&&(_.classList.remove("md-picker__cell"),_.innerHTML=""),n===d&&_.classList.add("md-picker__today"),r===d&&_.classList.add("md-picker__selected"),d>=l&&c>=d&&(_.classList.add("md-picker__cell"),_.innerHTML=h,this._addCellClickEvent(_,e)),d>c&&(_.classList.remove("md-picker__cell"),_.innerHTML="")}}},{key:"_initYear",value:function(){for(var e=this._sDialog.years,t=this._sDialog.tDate.year(),i=document.createDocumentFragment(),s=1900;2100>=s;s++){var a=document.createElement("li");a.textContent=s,s===t&&(a.id="md-date__currentYear",a.classList.add("md-picker__li--current")),i.appendChild(a)}for(;e.lastChild;)e.removeChild(e.lastChild);e.appendChild(i),this._changeYear(e)}},{key:"_switchToDateView",value:function(e){var t=this;e.addEventListener("click",function(){t._switchToDateViewFunction(e,t)},!1)}},{key:"_switchToDateViewFunction",value:function(t,i){t.classList.add("md-button--unclickable");var s=i._sDialog.viewHolder,a=i._sDialog.years,o=i._sDialog.header,l=document.getElementById("md-date__currentYear");e.dialog.view?(s.classList.add("zoomOut"),a.classList.remove("md-picker__years--invisible"),a.classList.add("zoomIn"),l.scrollIntoViewIfNeeded()):(a.classList.add("zoomOut"),s.classList.remove("zoomOut"),s.classList.add("zoomIn"),setTimeout(function(){a.classList.remove("zoomIn","zoomOut"),a.classList.add("md-picker__years--invisible"),s.classList.remove("zoomIn")},300)),o.classList.toggle("md-picker__header--invert"),e.dialog.view=!e.dialog.view,setTimeout(function(){t.classList.remove("md-button--unclickable")},300)}},{key:"_addCellClickEvent",value:function(e,t){var i=this;e.addEventListener("click",function(){var t=i._sDialog.picker,s=e.innerHTML,a=i._sDialog.tDate.date(s),o=t.querySelector(".md-picker__selected");o&&o.classList.remove("md-picker__selected"),e.classList.add("md-picker__selected"),i._sDialog.tDate=a,i._updateDisplayYear()})}},{key:"_updateDisplayYear",value:function(){var e=this._sDialog.tDate,t=this._sDialog.title,i=this._sDialog.subtitle,s=this._sDialog.current,a=this._sDialog.previous,o=this._sDialog.next;s.querySelector(".md-picker__month").innerHTML=e.format("MMMM YYYY"),a.querySelector(".md-picker__month").innerHTML=this._getMonth(e,-1).format("MMMM YYYY"),o.querySelector(".md-picker__month").innerHTML=this._getMonth(e,1).format("MMMM YYYY"),i.innerHTML=e.year(),t.innerHTML=e.format("ddd,")+"<br />"+e.format("MMM D")}},{key:"_changeMonth",value:function(){function e(e,a){var o=!1,n=t._sDialog.next,r=t._sDialog.current,c=t._sDialog.previous;i.classList.add("md-button--unclickable"),s.classList.add("md-button--unclickable"),r.classList.add(e),c.classList.add(e),n.classList.add(e);var d=a.cloneNode(!0),_=void 0;a===n?(_=c,r.parentNode.appendChild(d),n.id=r.id,r.id=c.id,c=r,r=n,n=d):(o=!0,_=n,c.id=r.id,r.id=n.id,n=r,r=c),setTimeout(function(){a===c&&(r.parentNode.insertBefore(d,r),c=d),t._sDialog.next=n,t._sDialog.current=r,t._sDialog.previous=c,r.classList.add(l),n.classList.add(l),c.classList.add(l),r.classList.remove(e),n.classList.remove(e),c.classList.remove(e),_.parentNode.removeChild(_)},300),setTimeout(function(){r.classList.remove(l),n.classList.remove(l),c.classList.remove(l),o?t._sDialog.tDate=t._getMonth(t._sDialog.tDate,-1):t._sDialog.tDate=t._getMonth(t._sDialog.tDate,1),t._initViewHolder(t._sDialog.tDate)},350),setTimeout(function(){i.classList.remove("md-button--unclickable"),s.classList.remove("md-button--unclickable")},400)}var t=this,i=this._sDialog.left,s=this._sDialog.right,a="md-picker__view--left",o="md-picker__view--right",l="md-picker__view--pause";i.addEventListener("click",function(){e(o,t._sDialog.previous)}),s.addEventListener("click",function(){e(a,t._sDialog.next)})}},{key:"_changeYear",value:function(e){var t=this;e.addEventListener("click",function(i){if(i.target&&"LI"==i.target.nodeName){var s=document.getElementById("md-date__currentYear");s.id="",s.classList.remove("md-picker__li--current"),i.target.id="md-date__currentYear",i.target.classList.add("md-picker__li--current"),t._switchToDateViewFunction(e,t),t._sDialog.tDate.year(parseInt(i.target.innerHTML,10)),t._updateDisplayYear()}},!1)}},{key:"_attachEventHandlers",value:function(){var e=this,t=this._sDialog.ok,i=this._sDialog.cancel;i.addEventListener("click",function(){e.toggle()}),t.addEventListener("click",function(){e._sDialog.date=e._sDialog.tDate,e.toggle()})}},{key:"_getMonth",value:function(e,t){var i=void 0;return i=e.clone(),t>0?i.add(Math.abs(t),"month"):i.subtract(Math.abs(t),"month")}}],[{key:"dialog",get:function(){return _dialog}}]),e}();Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(e){e=0===arguments.length?!0:!!e;var t=this.parentNode,i=window.getComputedStyle(t,null),s=parseInt(i.getPropertyValue("border-top-width"),10),a=parseInt(i.getPropertyValue("border-left-width"),10),o=this.offsetTop-t.offsetTop<t.scrollTop,l=this.offsetTop-t.offsetTop+this.clientHeight-s>t.scrollTop+t.clientHeight,n=this.offsetLeft-t.offsetLeft<t.scrollLeft,r=this.offsetLeft-t.offsetLeft+this.clientWidth-a>t.scrollLeft+t.clientWidth,c=o&&!l;(o||l)&&e&&(t.scrollTop=this.offsetTop-t.offsetTop-t.clientHeight/2-s+this.clientHeight/2),(n||r)&&e&&(t.scrollLeft=this.offsetLeft-t.offsetLeft-t.clientWidth/2-a+this.clientWidth/2),(o||l||n||r)&&!e&&this.scrollIntoView(c)});